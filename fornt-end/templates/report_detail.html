<!doctype html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Chi ti·∫øt b√°o c√°o #{{ report.id }}</title>
    
    <!-- Li√™n k·∫øt t·ªõi CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/report_detail.css') }}">
    <!-- Font Awesome ƒë·ªÉ d√πng icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="app">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="brand">QuanLyTaiNan</div>
            <nav class="menu" aria-label="Main">
                <a href="{{ url_for('admin_dashboard') }}" class="menu-link">üìä B·∫£ng ƒëi·ªÅu khi·ªÉn</a>
                <a href="{{ url_for('admin_dashboard') }}" class="menu-link">üó∫Ô∏è B·∫£n ƒë·ªì tai n·∫°n</a>
                <a href="{{ url_for('admin_dashboard') }}" class="menu-link">üìà Th·ªëng k√™</a>
                <a href="{{ url_for('admin_dashboard') }}" class="menu-link">üìã Danh s√°ch b√°o c√°o</a>
                <a href="{{ url_for('admin_dashboard') }}" class="menu-link">üë• Qu·∫£n l√Ω ng∆∞·ªùi d√πng</a>
                <a href="{{ url_for('admin_dashboard') }}" class="menu-link">üîî Th√¥ng b√°o</a>
            </nav>
            <div class="bottom">
                <button class="btn-alert" id="btnEmergency">üö® B√°o c√°o kh·∫©n</button>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main">
            <header class="topbar">
                <div class="report-header">
                    <div>
                        <h2>Chi ti·∫øt b√°o c√°o #{{ report.id }}</h2>
                        <div class="subtitle">Xem v√† qu·∫£n l√Ω th√¥ng tin chi ti·∫øt c·ªßa v·ª• tai n·∫°n</div>
                    </div>
                    <button id="backButton" class="btn-back">
                        <i class="fas fa-arrow-left"></i> Quay l·∫°i
                    </button>
                </div>
            </header>

            <section class="card" style="padding: 24px;">
                <div class="report-details">
                    <div class="report-info">
                        <p><strong>Th·ªùi gian:</strong> {{ report.timestamp.strftime('%H:%M:%S %d-%m-%Y') }}</p>
                        <p><strong>Lo·∫°i:</strong> Tai n·∫°n giao th√¥ng</p>
                        <p><strong>Khu v·ª±c:</strong> {{ report.location }}</p>
                        <p><strong>Tr·∫°ng th√°i:</strong> 
                            <span id="reportStatusBadge" class="badge">
                                {{ report.status }}
                            </span>
                        </p>
                        <hr class="divider">
                        <h3>Th√¥ng tin ng∆∞·ªùi b√°o c√°o</h3>
                        <p><strong>H·ªç v√† t√™n:</strong> {{ report.name }}</p>
                        <p><strong>CCCD:</strong> {{ report.cccd }}</p>
                        <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> {{ report.phone }}</p>
                    </div>
                    <div class="report-media">
                        <h3>M√¥ t·∫£ chi ti·∫øt</h3>
                        <p>{{ report.description }}</p>
                        <hr class="divider">
                        <h3>H√¨nh ·∫£nh minh h·ªça</h3>
                        <img src="{{ url_for('uploaded_file', filename=report.image_filename) }}" alt="H√¨nh ·∫£nh tai n·∫°n" class="report-image">
                    </div>
                </div>

                <div class="action-section">
                    <h3>C·∫≠p nh·∫≠t tr·∫°ng th√°i</h3>
                    <form id="statusUpdateForm" class="status-form">
                        <input type="hidden" name="report_id" value="{{ report.id }}">
                        <select name="status" id="status-select">
                            <option value="ƒêang x·ª≠ l√Ω" {% if report.status == 'ƒêang x·ª≠ l√Ω' %}selected{% endif %}>ƒêang x·ª≠ l√Ω</option>
                            <option value="ƒê√£ x·ª≠ l√Ω" {% if report.status == 'ƒê√£ x·ª≠ l√Ω' %}selected{% endif %}>ƒê√£ x·ª≠ l√Ω</option>
                            <option value="Ch·ªù" {% if report.status == 'Ch·ªù' %}selected{% endif %}>Ch·ªù</option>
                        </select>
                        <button type="submit" id="updateStatusBtn" class="btn-primary">
                            <i class="fas fa-sync-alt"></i> C·∫≠p nh·∫≠t
                        </button>
                    </form>
                    <div id="statusMessage" class="status-message"></div>
                </div>
            </section>

            <footer class="footer">AN TO√ÄN GIAO TH√îNG - H·∫†NH PH√öC C·ª¶A M·ªåI NH√Ä</footer>
        </main>
    </div>
    <!-- Li√™n k·∫øt t·ªõi JavaScript -->
    <script src="{{ url_for('static', filename='js/report_detail.js') }}"></script>
</body>
</html>
